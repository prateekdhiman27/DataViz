<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style> circle {fill: lightblue; stroke: black;} </style>
<body onload='init()'>
<svg width=300 height=300>
</svg>
<script>
async function init() {
    data = await d3.csv("https://prateekdhiman27.github.io/newstatedata.csv" , function(d){
        return{
            state : d.state,
            value: +d.value
        };
    }).then(function(data){

    console.log(data);

    var margin = 50;
    var w = 200;
    var h = 200;

    var xScale = d3.scaleLog().domain([10,150]).range([0,w]);
    var yScale = d3.scaleLog().domain([10,150]).range([h,0]);

    console.log(xScale[0]);
    d3.select("svg")
 //       .attr("width" , w + 2*margin)
 //       .attr("height" , h + 2*margin)
        .append("g")
        .attr("transform", "translate("+margin+","+margin+")")
        .selectAll("circle").data(data).enter().append("circle")
        .attr("cx" , function(d,i) { return xScale(d.value);})
        .attr("cy", function(d,i) {return yScale(d.value);})
        .attr("r", function(d) {return  2;});
    
    d3.select("svg").append("g")
    .attr("transform", "translate("+margin+","+margin+")")
    .call(d3.axisLeft(yScale).tickValues([10, 20, 50, 100])
    .tickFormat(d3.format("~s")));

    d3.select("svg").append("g")
    .attr("transform", "translate("+margin+","+(h+margin)+")")
    .call(d3.axisBottom(xScale).tickValues([10, 20, 50, 100])
    .tickFormat(d3.format("~s")));
    
    return data;
});

}


</script>
</body>
</html>